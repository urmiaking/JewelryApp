@page "/"
@using JewelryApp.Models.AppModels

@inject IPriceService PriceService

@if (_priceModel is null)
{

}
else
{
    <MudGrid>
        <MudItem xs="12" sm="4" md="2">
            <MudPaper Elevation="2" Class="pa-4" Style="height: 120px; background-color: #00a65a">
                <MudText Typo="Typo.h6" Class="text-white">گرم 18 عیار</MudText>
                <MudText Typo="Typo.h4" Align="Align.Left" Class="mt-5 text-white">@(_priceModel!.Gold18K)</MudText>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" sm="4" md="2">
            <MudPaper Elevation="2" Class="pa-4" Style="height: 120px; background-color: #0073b7">
                <MudText Typo="Typo.h6" Class="text-white">گرم 24 عیار</MudText>
                <MudText Typo="Typo.h4" Align="Align.Left" Class="mt-5 text-white">@(_priceModel!.Gold24K)</MudText>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" sm="4" md="2">
            <MudPaper Elevation="2" Class="pa-4" Style="height: 120px; background-color: #dd4b39 !important">
                <MudText Typo="Typo.h6" Class="text-white">انس طلا</MudText>
                <MudText Typo="Typo.h4" Align="Align.Left" Class="mt-5 text-white">@(_priceModel!.GoldOunce)</MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>
}

<ProductList Class="mt-5" Count="5" Filterable="false"></ProductList>
<InvoicesTable Class="mt-5" Count="5" IsInInvoicePage="false" Filterable="false"></InvoicesTable>

@code
{
    private PriceModel? _priceModel;
    Timer _timer = default!;

    protected override async Task OnInitializedAsync()
    {
        _priceModel = await PriceService.GetPrice();
        await base.OnInitializedAsync();
    }

    protected override void OnInitialized()
    {
        //_timer = new Timer(TimerCallback, new AutoResetEvent(false), 2000, 2000);
    }

    private async void TimerCallback(object? stateInfo)
    {
        
        StateHasChanged();
    }

}
